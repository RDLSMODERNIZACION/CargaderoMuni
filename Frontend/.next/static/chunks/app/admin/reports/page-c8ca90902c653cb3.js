(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[375],{7594:function(e,t,s){Promise.resolve().then(s.bind(s,310))},310:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var i=s(7437),a=s(2265),n=s(8597),r=s(3448);function d(){let e=(0,a.useMemo)(()=>{let e=new Map;return n.hp.forEach(t=>{t.pin_user_id&&e.set(t.pin_user_id,(e.get(t.pin_user_id)||0)+t.litros_entregados)}),Array.from(e.entries()).map(e=>{var t;let[s,i]=e;return{uid:s,name:(null===(t=n.rC.find(e=>e.id===s))||void 0===t?void 0:t.name)||String(s),liters:i}}).sort((e,t)=>t.liters-e.liters)},[]),t=(0,a.useMemo)(()=>{let e=new Map;return n.hp.forEach(t=>{e.set(t.station_id,(e.get(t.station_id)||0)+t.litros_entregados)}),Array.from(e.entries()).map(e=>{var t;let[s,i]=e;return{sid:s,name:(null===(t=n.yH.find(e=>e.id===s))||void 0===t?void 0:t.name)||s,liters:i}}).sort((e,t)=>t.liters-e.liters)},[]),s=(0,a.useMemo)(()=>n.hp.reduce((e,t)=>e+t.litros_entregados,0),[]),d=(e,t)=>{let s=new Blob(["name,liters\n"+e.map(e=>"".concat(e.name,",").concat(e.liters)).join("\n")],{type:"text/csv"}),i=URL.createObjectURL(s),a=document.createElement("a");a.href=i,a.download=t,a.click(),URL.revokeObjectURL(i)};return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsx)("h1",{className:"text-2xl font-bold",children:"Reportes"}),(0,i.jsxs)("section",{className:"grid md:grid-cols-3 gap-3",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"text-sm text-slate-500",children:"Total entregado"}),(0,i.jsx)("div",{className:"text-2xl font-semibold",children:(0,r.Cl)(s)})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"text-sm text-slate-500",children:"# Despachos"}),(0,i.jsx)("div",{className:"text-2xl font-semibold",children:n.hp.length})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"text-sm text-slate-500",children:"Usuarios activos"}),(0,i.jsx)("div",{className:"text-2xl font-semibold",children:new Set(n.hp.map(e=>e.pin_user_id).filter(Boolean)).size})]})]}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Consumo por usuario"}),(0,i.jsx)("button",{className:"btn",onClick:()=>d(e.map(e=>{let{name:t,liters:s}=e;return{name:t,liters:s}}),"consumo_por_usuario.csv"),children:"Descargar CSV"})]}),(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Usuario"}),(0,i.jsx)("th",{children:"Litros"})]})}),(0,i.jsx)("tbody",{children:e.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:(0,r.Cl)(e.liters)})]},e.uid))})]})]}),(0,i.jsxs)("section",{className:"card",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Consumo por estaci\xf3n"}),(0,i.jsx)("button",{className:"btn",onClick:()=>d(t.map(e=>{let{name:t,liters:s}=e;return{name:t,liters:s}}),"consumo_por_estacion.csv"),children:"Descargar CSV"})]}),(0,i.jsxs)("table",{className:"table",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Estaci\xf3n"}),(0,i.jsx)("th",{children:"Litros"})]})}),(0,i.jsx)("tbody",{children:t.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:(0,r.Cl)(e.liters)})]},e.sid))})]})]})]})}},8597:function(e,t,s){"use strict";s.d(t,{_g:function(){return r},hp:function(){return o},iG:function(){return n},rC:function(){return a},yH:function(){return i}});let i=[{id:"stn-a",name:"Estaci\xf3n A",active:!0,created_at:"2025-09-01T10:00:00Z"},{id:"stn-b",name:"Estaci\xf3n B",active:!0,created_at:"2025-09-10T10:00:00Z"},{id:"stn-c",name:"Estaci\xf3n C",active:!1,created_at:"2025-09-15T10:00:00Z"}],a=[{id:1,name:"Transporte L\xf3pez",enabled:!0,tries:0,locked_until:null,created_at:"2025-09-01T10:00:00Z"},{id:2,name:"Servicios \xc1guila",enabled:!1,tries:3,locked_until:"2025-10-21T12:00:00Z",created_at:"2025-09-05T10:00:00Z"},{id:3,name:"Obras Pampero",enabled:!0,tries:1,locked_until:null,created_at:"2025-09-08T10:00:00Z"}],n=[{id:101,pin_user_id:1,station_id:"stn-a",started_at:"2025-10-19T12:00:00Z",expires_at:"2025-10-19T15:00:00Z",max_liters:12e3,status:"active"},{id:102,pin_user_id:2,station_id:"stn-b",started_at:"2025-10-18T10:00:00Z",expires_at:"2025-10-18T12:00:00Z",max_liters:8e3,status:"expired"},{id:103,pin_user_id:3,station_id:"stn-a",started_at:"2025-10-17T11:00:00Z",expires_at:"2025-10-17T13:00:00Z",max_liters:6e3,status:"closed"}],r=[{id:9001,dispatch_id:2001,ts:"2025-10-19T12:31:00Z",camera_id:"cam-1",storage_path:"/photos/p1.jpg",meta:{angle:"front"}},{id:9002,dispatch_id:2001,ts:"2025-10-19T12:59:00Z",camera_id:"cam-1",storage_path:"/photos/p2.jpg",meta:{angle:"front"}},{id:9003,dispatch_id:2002,ts:"2025-10-18T09:40:00Z",camera_id:"cam-2",storage_path:"/photos/p3.jpg"}],d=[{id:7001,station_id:"stn-a",dispatch_id:2001,ts:"2025-10-19T12:30:00Z",state:"on",source:"controller"},{id:7002,station_id:"stn-a",dispatch_id:2001,ts:"2025-10-19T12:58:00Z",state:"off",source:"controller"},{id:7003,station_id:"stn-b",dispatch_id:2002,ts:"2025-10-18T09:20:00Z",state:"on"},{id:7004,station_id:"stn-b",dispatch_id:2002,ts:"2025-10-18T09:45:00Z",state:"off"}],o=[{id:2001,station_id:"stn-a",station_name:"Estaci\xf3n A",pin_user_id:1,user_name:"Transporte L\xf3pez",litros_autorizados:1e4,litros_entregados:9880,started_at:"2025-10-19T12:30:00Z",ended_at:"2025-10-19T13:05:00Z",status:"finished",source:"pin",notes:"patente: ABC123",photos:r.filter(e=>2001===e.dispatch_id),events:d.filter(e=>2001===e.dispatch_id)},{id:2002,station_id:"stn-b",station_name:"Estaci\xf3n B",pin_user_id:2,user_name:"Servicios \xc1guila",litros_autorizados:5e3,litros_entregados:3100,started_at:"2025-10-18T09:20:00Z",ended_at:"2025-10-18T09:45:00Z",status:"finished",source:"pin",notes:"patente: DEF456",photos:r.filter(e=>2002===e.dispatch_id),events:d.filter(e=>2002===e.dispatch_id)},{id:2003,station_id:"stn-a",station_name:"Estaci\xf3n A",pin_user_id:3,user_name:"Obras Pampero",litros_autorizados:12e3,litros_entregados:6200,started_at:"2025-10-19T10:10:00Z",ended_at:null,status:"running",source:"manual",notes:null,photos:[],events:[]}]},3448:function(e,t,s){"use strict";s.d(t,{Cl:function(){return a},G$:function(){return i}});let i=e=>{if(!e)return"—";let t=new Date(e);return isNaN(t.getTime())?"—":t.toLocaleString()},a=e=>e>=1e3?(e/1e3).toFixed(2)+" m\xb3":e.toFixed(0)+" L"}},function(e){e.O(0,[971,117,744],function(){return e(e.s=7594)}),_N_E=e.O()}]);